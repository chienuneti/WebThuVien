<div class="home-container">
  <!-- GI·ªÆ NGUY√äN HERO -->
  <section class="hero">
    <div class="hero-content">
      <h1>üìö Th∆∞ Vi·ªán S·ªë</h1>
      <p>Kh√°m ph√°, ƒë·ªçc v√† t·∫£i t√†i li·ªáu khoa h·ªçc t·ª´ th∆∞ vi·ªán s·ªë c·ªßa ch√∫ng t√¥i</p>

      <div class="hero-actions">
        <a routerLink="/library" class="btn btn-primary">üìñ Kh√°m ph√° th∆∞ vi·ªán</a>
        <a *ngIf="!isAuthenticated" routerLink="/dang-nhap" class="btn btn-secondary">
          ƒêƒÉng Nh·∫≠p
        </a>
        <a *ngIf="isAuthenticated" routerLink="/profile" class="btn btn-secondary">
          H·ªì s∆° c·ªßa t√¥i
        </a>
      </div>
    </div>
  </section>

  <!-- PH·∫¶N N·ªòI DUNG M·ªöI: 3 DANH M·ª§C D·ªåC -->
  <div class="main-content" *ngIf="!loading">

    <!-- 1. T√ÄI LI·ªÜU M·ªöI TH√äM -->
    <section class="doc-section">
      <div class="section-header">
        <h2>üÜï T√†i li·ªáu m·ªõi nh·∫•t</h2>

        <a [routerLink]="['/library/list']" [queryParams]="{ sortBy: 'newest' }" class="btn-link">
          Xem t·∫•t c·∫£ ‚Üí
        </a>

      </div>
      <div class="books-grid">
        <div *ngFor="let doc of newDocs" class="book-card" [routerLink]="['/library/document', doc.id]">
          <div class="book-cover">
            <img [src]="'/' + (doc.coverPath || 'assets/images/default-book.png')" (error)="onImgError($event)"
              [alt]="doc.title">
          </div>
          <div class="book-info">
            <h3 class="book-title">{{ doc.title }}</h3>
            <span class="badge">{{ doc.documentType }}</span>
          </div>
        </div>
      </div>
    </section>

    <!-- 2. T√ÄI LI·ªÜU XEM NHI·ªÄU -->
    <!-- ... c√°c ph·∫ßn kh√°c gi·ªØ nguy√™n ... -->

    <!-- PH·∫¶N 2: ƒêANG TRENDING (XEM NHI·ªÄU) -->
    <section class="doc-section">
      <div class="section-header">
        <h2>üî• ƒêang Trending</h2>
        <a [routerLink]="['/library/list']" [queryParams]="{ sortBy: 'trending' }" class="btn-link">
          Xem t·∫•t c·∫£ ‚Üí
        </a>

      </div>
      <div class="books-grid">
        <div *ngFor="let doc of trendingDocs" class="book-card" [routerLink]="['/library/document', doc.id]">
          <div class="book-cover">
            <img [src]="'/' + (doc.coverPath || 'assets/images/default-book.png')" (error)="onImgError($event)"
              [alt]="doc.title">
          </div>
          <div class="book-info">
            <h3 class="book-title">{{ doc.title }}</h3>
            <div class="book-footer">
              <span class="badge secondary">{{ doc.documentType }}</span>
              <!-- HI·ªÇN TH·ªä L∆Ø·ª¢T XEM -->
              <span class="stat-text">üëÅÔ∏è {{ doc.viewCount }} l∆∞·ª£t xem</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ... PH·∫¶N 3: T·∫¢I XU·ªêNG NHI·ªÄU (Gi·ªØ nguy√™n ho·∫∑c c·∫≠p nh·∫≠t t∆∞∆°ng t·ª±) ... -->
    <section class="doc-section">
      <div class="section-header">
        <h2>üì• T·∫£i xu·ªëng nhi·ªÅu nh·∫•t</h2>
        <a [routerLink]="['/library/list']" [queryParams]="{ sortBy: 'popular' }" class="btn-link">
          Xem t·∫•t c·∫£ ‚Üí
        </a>

      </div>
      <div class="books-grid">
        <div *ngFor="let doc of popularDocs" class="book-card" [routerLink]="['/library/document', doc.id]">
          <div class="book-cover">
            <img [src]="'/' + (doc.coverPath || 'assets/images/default-book.png')" (error)="onImgError($event)"
              [alt]="doc.title">
          </div>
          <div class="book-info">
            <h3 class="book-title">{{ doc.title }}</h3>
            <div class="book-footer">
              <span class="badge success">{{ doc.documentType }}</span>
              <!-- HI·ªÇN TH·ªä L∆Ø·ª¢T T·∫¢I -->
              <span class="stat-text">üì• {{ doc.downloadCount }} l∆∞·ª£t t·∫£i</span>
            </div>
          </div>
        </div>
      </div>
    </section>

  </div>

  <div *ngIf="loading" class="loader">ƒêang t·∫£i d·ªØ li·ªáu...</div>
</div>