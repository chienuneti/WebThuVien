<div class="page-wrapper">
  <button class="btn-back" (click)='goBack()' style="margin-bottom: 10px;">
    ‚Üê Quay l·∫°i
  </button>

  <div class="card-container">
    <h2 class="section-header">T√¨m ki·∫øm n√¢ng cao</h2>

    <div class="search-form">
      <!-- TI√äU ƒê·ªÄ & B·ªò S∆ØU T·∫¨P -->
      <div class="form-row">
        <div class="form-group col">
          <label>Ti√™u ƒë·ªÅ t√†i li·ªáu</label>
          <input type="text" [(ngModel)]="searchForm.title" placeholder="T√¨m theo t√™n s√°ch, ti√™u ƒë·ªÅ lu·∫≠n vƒÉn..." class="form-input">
        </div>
        <div class="form-group col-sm">
          <label>B·ªô s∆∞u t·∫≠p</label>
          <select [(ngModel)]="searchForm.collectionId" class="form-input">
            <option value="">-- T·∫•t c·∫£ --</option>
            <option *ngFor="let col of collections" [value]="col.id">{{ col.name }}</option>
          </select>
        </div>
      </div>

      <!-- LO·∫†I T√ÄI LI·ªÜU & NG√ÄY XU·∫§T B·∫¢N -->
      <div class="form-row">
        <div class="form-group col">
          <label>Lo·∫°i t√†i li·ªáu</label>
          <select [(ngModel)]="searchForm.documentType" class="form-input">
            <option value="">-- T·∫•t c·∫£ lo·∫°i --</option>
            <option value="Thesis">Kh√≥a lu·∫≠n/Lu·∫≠n vƒÉn</option>
            <option value="InternalBook">S√°ch n·ªôi b·ªô</option>
            <option value="ExternalBook">S√°ch xu·∫•t b·∫£n</option>
            <option value="Research">Nghi√™n c·ª©u khoa h·ªçc</option>
            <option value="ResearchPublication">B√†i b√°o khoa h·ªçc</option>
          </select>
        </div>
        <div class="form-group col">
          <label>Ng√†y xu·∫•t b·∫£n (T·ª´ ng√†y)</label>
          <input type="date" [(ngModel)]="searchForm.startDate" class="form-input">
        </div>
        <div class="form-group col">
          <label>Ng√†y xu·∫•t b·∫£n (ƒê·∫øn ng√†y)</label>
          <input type="date" [(ngModel)]="searchForm.endDate" class="form-input">
        </div>
      </div>

      <!-- BOX ƒê·ªòNG: THEO ƒê√öNG LOGIC B·∫†N G·ª¨I -->
      <div class="dynamic-box" [ngSwitch]="searchForm.documentType" *ngIf="searchForm.documentType">

        <!-- THESIS -->
        <div *ngSwitchCase="'Thesis'">
          <h4 class="sub-title">Th√¥ng tin Lu·∫≠n vƒÉn / ƒê·ªì √°n</h4>
          <div class="form-row">
            <div class="form-group col">
              <label>Degree Level</label>
              <select [(ngModel)]="searchForm.thesis.degreeLevel" class="form-input">
                <option value="">-- T·∫•t c·∫£ --</option>
                <option value="ƒê·∫°i h·ªçc">ƒê·∫°i h·ªçc</option>
                <option value="Th·∫°c sƒ©">Th·∫°c sƒ©</option>
                <option value="Ti·∫øn sƒ©">Ti·∫øn sƒ©</option>
              </select>
            </div>
            <div class="form-group col">
              <label>Discipline</label>
              <select [(ngModel)]="searchForm.thesis.discipline" class="form-input">
                <option value="">-- T·∫•t c·∫£ chuy√™n ng√†nh --</option>
                <option *ngFor="let d of availableDiscipline" [value]="d.name">{{ d.name }}</option>
              </select>
            </div>
          </div>
          <div class="form-group mt-2">
            <label>Gi·∫£ng vi√™n h∆∞·ªõng d·∫´n</label>
            <input type="text" [(ngModel)]="searchForm.thesis.advisorName" placeholder="T√™n GV h∆∞·ªõng d·∫´n..." class="form-input">
          </div>
        </div>

        <!-- INTERNAL BOOK -->
        <div *ngSwitchCase="'InternalBook'">
          <h4 class="sub-title">Th√¥ng tin Gi√°o tr√¨nh / S√°ch n·ªôi b·ªô</h4>
          <div class="form-row">
            <div class="form-group col">
              <label>Khoa</label>
              <select [(ngModel)]="searchForm.internalBook.faculty" class="form-input">
                <option value="">-- T·∫•t c·∫£ khoa --</option>
                <option *ngFor="let d of availableFaculties" [value]="d.name">{{ d.name }}</option>
              </select>
            </div>
            <div class="form-group col">
              <label>Lo·∫°i s√°ch</label>
              <select [(ngModel)]="searchForm.internalBook.documentType" class="form-input">
                <option value="">-- T·∫•t c·∫£ lo·∫°i --</option>
                <option value="Gi√°o tr√¨nh">Gi√°o tr√¨nh</option>
                <option value="B√†i gi·∫£ng">B√†i gi·∫£ng</option>
                <option value="T√†i li·ªáu √¥n t·∫≠p">T√†i li·ªáu √¥n t·∫≠p</option>
                <option value="ƒê·ªÅ c∆∞∆°ng h·ªçc ph·∫ßn">ƒê·ªÅ c∆∞∆°ng h·ªçc ph·∫ßn</option>
              </select>
            </div>
           
          </div>
        </div>

        <!-- EXTERNAL BOOK -->
        <div *ngSwitchCase="'ExternalBook'">
          <h4 class="sub-title">Th√¥ng tin S√°ch xu·∫•t b·∫£n (External)</h4>
          <div class="form-row">
            <div class="form-group col">
              <label>Nh√† xu·∫•t b·∫£n (Publisher)</label>
              <input type="text" [(ngModel)]="searchForm.externalBook.publisher" placeholder="Nh·∫≠p t√™n NXB..." class="form-input">
            </div>
          </div>
        </div>

        <!-- RESEARCH -->
        <div *ngSwitchCase="'Research'">
          <h4 class="sub-title">Th√¥ng tin ƒê·ªÅ t√†i Nghi√™n c·ª©u</h4>
          <div class="form-group">
            <label>C·∫•p ƒë·ªô nghi√™n c·ª©u (Research Level)</label>
            <select [(ngModel)]="searchForm.research.researchLevel" class="form-input">
              <option value="">-- T·∫•t c·∫£ --</option>
              <option value="C·∫•p c∆° s·ªü (tr∆∞·ªùng/khoa/vi·ªán)">C·∫•p c∆° s·ªü (tr∆∞·ªùng/khoa/vi·ªán)</option>
              <option value="C·∫•p b·ªô/ng√†nh">C·∫•p b·ªô/ng√†nh</option>
              <option value="C·∫•p nh√† n∆∞·ªõc (c·∫•p qu·ªëc gia)">C·∫•p nh√† n∆∞·ªõc (c·∫•p qu·ªëc gia)</option>
              <option value="C·∫•p qu·ªëc t·∫ø">C·∫•p qu·ªëc t·∫ø</option>
            </select>
          </div>
        </div>

        <!-- RESEARCH PUBLICATION -->
        <div *ngSwitchCase="'ResearchPublication'">
          <h4 class="sub-title">Th√¥ng tin C√¥ng b√°o khoa h·ªçc</h4>
          <div class="form-row">
            <div class="form-group col">
              <label>T√™n H·ªôi ngh·ªã / T·∫°p ch√≠</label>
              <input type="text" [(ngModel)]="searchForm.researchPublication.venueName" placeholder="T√™n t·∫°p ch√≠, venue..." class="form-input">
            </div>
            <div class="form-group col">
              <label>Lo·∫°i h√¨nh c√¥ng b·ªë</label>
              <select [(ngModel)]="searchForm.researchPublication.publicationType" class="form-input">
                <option value="">-- T·∫•t c·∫£ --</option>
                <option value="Conference Paper">Conference Paper</option>
                <option value="Journal Article">Journal Article</option>
              </select>
            </div>
          </div>
        </div>

      </div>

      <!-- T·ª™ KH√ìA -->
      <div class="form-group mt-3">
        <label>T·ª´ kh√≥a (Keywords)</label>
        <p class="help-text" style="font-size: 12px; color: #666; margin-bottom: 5px;">
          * NgƒÉn c√°ch b·ªüi d·∫•u ph·∫©y. T√¨m th·∫•y n·∫øu t√†i li·ªáu c√≥ √≠t nh·∫•t 1 t·ª´ kh√≥a tr√πng kh·ªõp.
        </p>
        <input type="text" [(ngModel)]="searchForm.keywords" placeholder="VD: CNTT, Tr√≠ tu·ªá nh√¢n t·∫°o, Angular..." class="form-input">
      </div>

      <!-- N√öT B·∫§M -->
      <div class="search-actions" style="margin-top: 30px; display: flex; justify-content: flex-end; gap: 15px;">
        <button type="button" class="btn-reset" (click)="resetForm()">L√†m m·ªõi</button>
        <button type="button" class="btn-search-primary" (click)="onAdvancedSearch()">
          üîç T√åM KI·∫æM NGAY
        </button>
      </div>

    </div>
  </div>
</div>